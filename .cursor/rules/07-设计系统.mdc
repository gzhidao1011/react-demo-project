---
description:
globs:
alwaysApply: true
---

# 设计系统

本文档定义了项目的设计系统规范，包括样式方案、颜色系统、图标系统等。

> **重要**：实现 UI 时，优先使用 Tailwind CSS 工具类，复杂样式才使用 CSS。

## 样式方案

### Tailwind CSS + CSS

项目采用 **Tailwind CSS v4** 和 **CSS** 相结合的样式方案。

**样式优先级**：

1. **优先使用 Tailwind CSS**：实现 UI 时，优先使用 Tailwind CSS 工具类
2. **复杂样式使用 CSS**：复杂样式或需要动态计算的样式才使用 CSS
3. **使用 CSS 变量**：使用全局主题变量（`var(--color-primary)` 等）保持主题一致性

**Tailwind CSS 使用示例**：

```tsx
// ✅ 正确：优先使用 Tailwind CSS
<div className="flex h-full w-full items-center justify-center rounded-lg bg-[var(--color-bg-card)] p-4 shadow-md">
  <div className="text-base font-semibold text-[var(--color-text-primary)]">内容</div>
</div>
```

**CSS 使用示例**：

```tsx
// ✅ 正确：复杂样式才使用 CSS
<div className="custom-animation">内容</div>
```

```css
/* layout.css */
.custom-animation {
  /* 复杂的动画、伪元素等 Tailwind 难以实现的样式 */
  animation: slideIn 0.3s ease-out;
}

.custom-animation::before {
  content: "";
  position: absolute;
  /* ... */
}
```

**❌ 错误示例**：

```tsx
// ❌ 错误：能用 Tailwind 实现的样式却写在 CSS 中
<div className="wrapper">
  <div className="content">内容</div>
</div>
```

```css
/* ❌ 不推荐 */
.wrapper {
  display: flex;
  height: 100%;
  width: 100%;
  align-items: center;
  justify-content: center;
  padding: 16px;
  background-color: white;
  border-radius: 8px;
}
```

## 颜色系统

### 全局主题系统

项目使用 Tailwind CSS v4 的 `@theme` 指令定义全局主题系统，所有颜色通过主题变量统一管理。

**主题配置位置**：`packages/tailwind-config/shared-styles.css`

#### 主题颜色定义

**主色系 (Primary)**：
- `--color-primary`: 主色 (#4f46e5 - indigo-600)
- `--color-primary-light`: 浅色变体 (indigo-500)
- `--color-primary-lighter`: 更浅色 (indigo-400)
- `--color-primary-lightest`: 最浅色 (indigo-300)
- `--color-primary-dark`: 深色变体 (indigo-700)
- `--color-primary-50/100/200`: 背景色变体

**次要色系 (Secondary)**：
- `--color-secondary`: 次要色 (purple-600)
- `--color-secondary-light`: 浅色变体
- `--color-secondary-50/200`: 背景色变体

**强调色系 (Accent)**：
- `--color-accent`: 强调色 (pink-500)
- `--color-accent-light`: 浅色变体
- `--color-accent-200`: 背景色变体

**状态色系**：
- **错误 (Error)**: `--color-error` (red-500)
- **成功 (Success)**: `--color-success` (emerald-500)
- **警告 (Warning)**: `--color-warning` (amber-500)
- **信息 (Info)**: `--color-info` (blue-500)

**语义化颜色变量**：
- **背景**: `--color-bg-primary`, `--color-bg-secondary`, `--color-bg-card`, `--color-bg-input`
- **文本**: `--color-text-primary`, `--color-text-secondary`, `--color-text-tertiary`
- **边框**: `--color-border`, `--color-border-focus`

#### 使用方式

**方式 1: 使用 Tailwind 主题颜色（推荐）**

直接使用 Tailwind 的颜色类，它们已经映射到主题变量：

```tsx
// 主色按钮
<button className="bg-indigo-600 hover:bg-indigo-500 text-white">
  按钮
</button>

// 使用主题变量（通过任意值语法）
<button className="bg-[var(--color-primary)] hover:bg-[var(--color-primary-light)]">
  按钮
</button>
```

**方式 2: 使用语义化变量（推荐用于复杂场景）**

```tsx
// 使用语义化变量
<div className="bg-[var(--color-bg-card)] text-[var(--color-text-primary)]">
  内容
</div>

// 输入框
<input className="bg-[var(--color-bg-input)] focus:bg-[var(--color-bg-input-focus)] focus:outline-[var(--color-border-focus)]" />
```

**方式 3: 在 CSS 文件中使用**

```css
.custom-button {
  background-color: var(--color-primary);
  color: white;
}

.custom-button:hover {
  background-color: var(--color-primary-light);
}
```

#### 暗色模式支持

主题系统自动支持暗色模式，通过 `dark:` 前缀或媒体查询自动切换：

```tsx
<div className="bg-[var(--color-bg-card)] dark:bg-[var(--color-bg-card-dark)] text-[var(--color-text-primary)] dark:text-[var(--color-text-primary-dark)]">
  内容
</div>
```

#### 修改主题颜色

要修改主题颜色，编辑 `packages/tailwind-config/shared-styles.css` 中的 `@theme` 块：

```css
@theme {
  --color-primary: #your-color;
  --color-primary-light: #your-light-color;
  /* ... */
}
```

修改后，所有使用该主题变量的组件都会自动更新。

#### 组件迁移示例

将现有组件从硬编码颜色迁移到主题变量：

**之前（硬编码颜色）**：
```tsx
<button className="bg-indigo-600 hover:bg-indigo-500 text-white">
  注册
</button>
```

**之后（使用主题变量）**：
```tsx
{/* 方式 1: 继续使用 Tailwind 类（推荐，因为已映射到主题） */}
<button className="bg-indigo-600 hover:bg-indigo-500 text-white">
  注册
</button>

{/* 方式 2: 使用语义化变量 */}
<button className="bg-[var(--color-primary)] hover:bg-[var(--color-primary-light)] text-white">
  注册
</button>
```

#### 最佳实践

1. **优先使用 Tailwind 类名**：简单直接，性能好
2. **语义化变量用于复杂场景**：需要动态切换或复杂计算时使用
3. **保持一致性**：同一功能使用相同的颜色变量
4. **避免硬编码**：不要直接写 `#4f46e5` 这样的颜色值
5. **使用语义化变量**：优先使用 `--color-bg-card`、`--color-text-primary` 等语义化变量

## 图标系统

### Heroicons（React 项目）

项目使用 **@heroicons/react** 作为图标库。

**使用方式**：

```tsx
import { PhotoIcon, UserCircleIcon } from "@heroicons/react/24/solid";
import { ChevronDownIcon } from "@heroicons/react/16/solid";

// 使用图标
<PhotoIcon className="h-6 w-6 text-[var(--color-primary)]" />
<UserCircleIcon className="h-5 w-5" />
```

**图标尺寸**：
- `24/solid` 或 `24/outline`：24x24 图标
- `16/solid` 或 `16/outline`：16x16 图标

**使用示例**：

```tsx
<button className="flex items-center gap-2">
  <PhotoIcon className="h-5 w-5" />
  <span>上传照片</span>
</button>
```

### 自定义 SVG 图标

项目中的自定义 SVG 图标位于 `packages/ui/src/assets/icons/` 目录，通过 `@yysl/ui` 包统一导出。

**图标导出位置**：`packages/ui/src/assets/icons/index.ts`

#### 作为 React 组件使用（推荐）

使用 `?component` 导入 SVG 作为 React 组件，可以直接在 JSX 中使用，支持样式控制和属性传递。

**导出方式**：

```typescript
// packages/ui/src/assets/icons/index.ts
export { default as LayerIcon } from "./layerIcon.svg?component"
export { default as MapIcon } from "./mapIcon.svg?component"
```

**使用方式**：

```tsx
import { LayerIcon, MapIcon } from "@yysl/ui"

// 直接作为组件使用
<LayerIcon />
<MapIcon />

// 可以传递属性（如 className、style 等）
<LayerIcon className="h-6 w-6 text-[var(--color-primary)]" />
<MapIcon style={{ width: "24px", height: "24px" }} />
```

**优势**：

- ✅ 可以作为 React 组件直接使用
- ✅ 支持通过 `className` 和 `style` 控制样式
- ✅ 支持通过属性传递配置（如 `width`、`height`、`fill` 等）
- ✅ 更好的类型支持
- ✅ 可以与其他组件组合使用

#### 作为 URL 使用

使用 `?url` 导入 SVG 作为 URL 字符串，适用于需要作为图片源使用的场景。

**使用方式**：

```tsx
import iconUrl from "@yysl/ui/assets/icons/mapIcon.svg?url"

<img src={iconUrl} alt="图标" />
```

**适用场景**：

- 需要作为 `<img>` 标签的 `src` 属性
- 需要作为背景图片
- 需要动态切换图标 URL

#### 作为原始字符串使用

使用 `?raw` 导入 SVG 作为原始字符串，适用于需要直接操作 SVG 内容的场景。

**使用方式**：

```typescript
import svgContent from "@yysl/ui/assets/icons/mapIcon.svg?raw"

// svgContent 是 SVG 的字符串内容
console.log(svgContent) // "<svg>...</svg>"
```

**适用场景**：

- 需要动态修改 SVG 内容
- 需要将 SVG 内容插入到 HTML 中
- 需要处理 SVG 字符串

#### 图标使用示例

**示例 1：在组件中使用图标组件**

```tsx
<div className="flex items-center gap-2">
  <LayerIcon className="h-5 w-5 text-[var(--color-primary)]" />
  <span>图层</span>
</div>
```

**示例 2：将图标作为 prop 传递**

```tsx
<SwitchCardMobile title="地图" actived={actived} icon={MapIcon} onChange={handleChange} />
```

**示例 3：在列表中使用图标**

```tsx
{menuItems.map((item) => (
  <div key={item.id}>
    <item.icon className="h-6 w-6" />
    <span>{item.label}</span>
  </div>
))}
```

#### 注意事项

1. **优先使用组件方式**：推荐使用 `?component` 导入作为 React 组件，更灵活且支持样式控制
2. **统一从 @yysl/ui 导入**：所有自定义图标都通过 `@yysl/ui` 包统一导出，保持一致性
3. **图标命名规范**：图标组件使用 PascalCase 命名（如 `LayerIcon`、`MapIcon`）
4. **样式控制**：使用组件方式时，可以通过 `className` 和 `style` 控制图标样式，支持 Tailwind CSS 类名

## 响应式设计

### 移动端适配

项目支持移动端和桌面端，使用 Tailwind CSS 的响应式前缀进行适配。

**使用方式**：

```tsx
// 使用 Tailwind 响应式类
<div className="flex flex-col md:flex-row">
  {/* 移动端：垂直布局，桌面端：水平布局 */}
</div>

// 条件渲染（使用媒体查询 hook，如果需要）
const { isMobile } = useMediaQuery("(max-width: 768px)")

{isMobile ? <MobileView /> : <DesktopView />}
```

### Tailwind 响应式类

使用 Tailwind CSS 的响应式前缀：

```tsx
// 响应式布局
<div className="flex flex-col md:flex-row">
  {/* 移动端：垂直布局，桌面端：水平布局 */}
</div>

// 响应式间距
<div className="p-4 md:p-8">
  {/* 移动端：16px，桌面端：32px */}
</div>

// 响应式字体
<div className="text-sm md:text-base lg:text-lg">
  {/* 响应式字体大小 */}
</div>
```

## 样式最佳实践

### 1. 优先使用 Tailwind CSS

```tsx
// ✅ 推荐
<div className="flex items-center justify-between rounded-lg bg-[var(--color-bg-card)] p-4 shadow-md">
  <span className="text-lg font-semibold text-[var(--color-text-primary)]">标题</span>
</div>

// ❌ 不推荐
<div className="custom-container">
  <span className="custom-title">标题</span>
</div>
```

```css
/* ❌ 不推荐：能用 Tailwind 实现的样式 */
.custom-container {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px;
  background-color: white;
  border-radius: 8px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}
```

### 2. 使用 CSS 变量保持主题一致性

```tsx
// ✅ 推荐：使用主题变量
<div className="bg-[var(--color-primary)] text-[var(--color-text-primary)]">
  内容
</div>

// ❌ 不推荐：硬编码颜色
<div className="bg-[#4f46e5] text-[#111827]">内容</div>
```

### 3. 复杂样式使用 CSS

```css
/* layout.css 或组件 CSS 文件 */
.complex-animation {
  /* 复杂的动画、伪元素、媒体查询等 */
  animation: slideIn 0.3s ease-out;
}

.complex-animation::before {
  content: "";
  position: absolute;
  /* ... */
}

@media (max-width: 768px) {
  /* 移动端样式 */
}
```

### 4. 保持样式一致性

- 使用全局主题变量（`--color-primary`、`--color-bg-card` 等）
- 使用 Tailwind CSS 的标准类名
- 优先使用语义化变量（`--color-bg-card`、`--color-text-primary` 等）
- 避免硬编码颜色值
- 保持间距、圆角、阴影等样式的一致性

## 注意事项

1. **优先使用 Tailwind CSS**：能用 Tailwind 实现的样式不要写在 CSS 中
2. **使用 CSS 变量**：保持主题一致性，避免硬编码颜色值
3. **保持样式一致性**：使用统一的主题变量和 Tailwind 类名
4. **使用全局主题变量**：优先使用 `--color-primary`、`--color-bg-card` 等主题变量
5. **使用语义化变量**：优先使用 `--color-bg-card`、`--color-text-primary` 等语义化变量
6. **支持暗色模式**：使用 `dark:` 前缀或语义化变量的暗色版本
