---
description:
globs:
alwaysApply: true
---

# 代码风格指南

## TypeScript/JavaScript 风格

- 访问对象属性时始终使用可选链（`?.`）
- 对于可能为 undefined 的值，始终使用空值合并（`??`）或默认值
- 使用数组方法前始终检查数组是否存在
- 解构前验证对象属性
- 使用 ES6+ 特性，如箭头函数、解构和展开运算符
- 保持函数小而专注，单一职责
- 避免魔法数字和字符串 - 使用命名常量
- 对于异步代码，使用 async/await 而不是原始 Promise

## Vue 性能优化

- 始终避免在渲染中创建内联对象/数组以防止不必要的重新渲染
- 渲染列表时始终使用正确的 key props（尽可能避免使用 index）
- 对于不需要立即加载的组件使用懒加载
- 对于可能快速触发的事件（resize、scroll、input）使用防抖处理
- 优先使用 `computed` 而非方法计算衍生数据，利用缓存机制提升性能
- 使用 `watch` 监听响应式数据变化，避免在模板中直接调用方法
- 大型列表使用虚拟滚动（如 `el-virtual-list`）优化渲染性能
- 图片使用懒加载（`loading="lazy"` 或 `v-lazy`）减少初始加载时间
- 避免不必要的响应式数据，使用 `shallowRef` 或 `shallowReactive` 处理大型对象
- 在组件卸载时清理副作用（定时器、事件监听、订阅等），防止内存泄漏
- 使用 `v-show` 替代 `v-if` 处理频繁切换的显示/隐藏（当切换成本高时）
- 对于复杂组件，使用 `v-memo` 缓存渲染结果
- 合理使用 `defineAsyncComponent` 进行组件异步加载，减少初始包体积

## 错误处理

- 始终处理异步操作中的潜在错误
- 提供有助于调试的有意义的错误消息
- 为可能失败的组件实现回退 UI
- 使用错误边界捕获和处理运行时错误
- 避免静默失败 - 适当记录错误

## CSS 指南

- 使用 Tailwind CSS 为组件添加样式
- 遵循实用优先的方法
- 将相关的实用类分组在一起
- 尽可能优先使用 Tailwind 实用类而不是自定义 CSS
- 对于自定义 CSS，使用 kebab-case(单词之间用连字符（-）分隔，全部小写) 作为类名和属性名
